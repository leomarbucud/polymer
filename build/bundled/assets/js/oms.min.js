(function(){var a,b,c,d,e,g={}.hasOwnProperty,h=[].slice;this.OverlappingMarkerSpiderfier=function(){function a(c,a){var d,b,f;for(d in this.map=c,null==a&&(a={}),null==this.constructor.N&&(this.constructor.N=!0,j=google.maps,i=j.event,k=j.MapTypeId,l.keepSpiderfied=!1,l.ignoreMapClick=!1,l.markersWontHide=!1,l.markersWontMove=!1,l.basicFormatEvents=!1,l.nearbyDistance=20,l.circleSpiralSwitchover=9,l.circleFootSeparation=23,l.circleStartAngle=m/12,l.spiralFootSeparation=26,l.spiralLengthStart=11,l.spiralLengthFactor=4,l.spiderfiedZIndex=j.Marker.MAX_ZINDEX+2E4,l.highlightedLegZIndex=j.Marker.MAX_ZINDEX+1E4,l.usualLegZIndex=j.Marker.MAX_ZINDEX+1,l.legWeight=1.5,l.legColors={usual:{},highlighted:{}},f=l.legColors.usual,b=l.legColors.highlighted,f[k.HYBRID]=f[k.SATELLITE]="#fff",b[k.HYBRID]=b[k.SATELLITE]="#f00",f[k.TERRAIN]=f[k.ROADMAP]="#444",b[k.TERRAIN]=b[k.ROADMAP]="#f00",this.constructor.j=function(b){return this.setMap(b)},this.constructor.j.prototype=new j.OverlayView,this.constructor.j.prototype.draw=function(){}),a)g.call(a,d)&&(b=a[d],this[d]=b);this.g=new this.constructor.j(this.map),this.C(),this.c={},this.B=this.l=null,this.addListener("click",function(c,a){return i.trigger(c,"spider_click",a)}),this.addListener("format",function(c,a){return i.trigger(c,"spider_format",a)}),this.ignoreMapClick||i.addListener(this.map,"click",function(b){return function(){return b.unspiderfy()}}(this)),i.addListener(this.map,"maptypeid_changed",function(b){return function(){return b.unspiderfy()}}(this)),i.addListener(this.map,"zoom_changed",function(b){return function(){if(b.unspiderfy(),!b.basicFormatEvents)return b.h()}}(this))}var i,j,b,d,k,l,c,m,e,n=Math.sin,o=Math.cos;for(l=a.prototype,c=[a,l],b=0,d=c.length;b<d;b++)e=c[b],e.VERSION="1.0.3";return m=2*Math.PI,j=i=k=null,a.markerStatus={SPIDERFIED:"SPIDERFIED",SPIDERFIABLE:"SPIDERFIABLE",UNSPIDERFIABLE:"UNSPIDERFIABLE",UNSPIDERFIED:"UNSPIDERFIED"},l.C=function(){this.a=[],this.s=[]},l.addMarker=function(b,a){return b.setMap(this.map),this.trackMarker(b,a)},l.trackMarker=function(c,a){var d;return null==c._oms?(c._oms=!0,d=[i.addListener(c,"click",function(a){return function(b){return a.V(c,b)}}(this))],this.markersWontHide||d.push(i.addListener(c,"visible_changed",function(a){return function(){return a.D(c,!1)}}(this))),this.markersWontMove||d.push(i.addListener(c,"position_changed",function(a){return function(){return a.D(c,!0)}}(this))),null!=a&&d.push(i.addListener(c,"spider_click",a)),this.s.push(d),this.a.push(c),this.basicFormatEvents?this.trigger("format",c,this.constructor.markerStatus.UNSPIDERFIED):(this.trigger("format",c,this.constructor.markerStatus.UNSPIDERFIABLE),this.h()),this):this},l.D=function(b,a){if(!this.J&&!this.K)return null==b._omsData||!a&&b.getVisible()||this.unspiderfy(a?b:null),this.h()},l.getMarkers=function(){return this.a.slice(0)},l.removeMarker=function(b){return this.forgetMarker(b),b.setMap(null)},l.forgetMarker=function(c){var a,d,b,f,e;if(null!=c._omsData&&this.unspiderfy(),a=this.A(this.a,c),0>a)return this;for(e=this.s.splice(a,1)[0],d=0,b=e.length;d<b;d++)f=e[d],i.removeListener(f);return delete c._oms,this.a.splice(a,1),this.h(),this},l.removeAllMarkers=l.clearMarkers=function(){var c,a,d,b;for(b=this.getMarkers(),this.forgetAllMarkers(),c=0,a=b.length;c<a;c++)d=b[c],d.setMap(null);return this},l.forgetAllMarkers=function(){var h,a,d,b,f,e,g,c;for(this.unspiderfy(),c=this.a,h=a=0,d=c.length;a<d;h=++a){for(e=c[h],f=this.s[h],g=0,h=f.length;g<h;g++)b=f[g],i.removeListener(b);delete e._oms}return this.C(),this},l.addListener=function(c,a){var d;return(null==(d=this.c)[c]?d[c]=[]:d[c]).push(a),this},l.removeListener=function(c,a){var d;return d=this.A(this.c[c],a),0>d||this.c[c].splice(d,1),this},l.clearListeners=function(b){return this.c[b]=[],this},l.trigger=function(){var c,a,d,b,f,e;for(a=arguments[0],c=2<=arguments.length?h.call(arguments,1):[],a=null==(d=this.c[a])?[]:d,e=[],b=0,f=a.length;b<f;b++)d=a[b],e.push(d.apply(null,c));return e},l.L=function(h,a){var d,b,f,e,g;for(e=this.circleFootSeparation*(2+h)/m,b=m/h,g=[],d=f=0;0<=h?f<h:f>h;d=0<=h?++f:--f)d=this.circleStartAngle+d*b,g.push(new j.Point(a.x+e*o(d),a.y+e*n(d)));return g},l.M=function(g,a){var d,b,f,e,c;for(e=this.spiralLengthStart,d=0,c=[],b=f=0;0<=g?f<g:f>g;b=0<=g?++f:--f)d+=this.spiralFootSeparation/e+5E-4*b,b=new j.Point(a.x+e*o(d),a.y+e*n(d)),e+=m*this.spiralLengthFactor/d,c.push(b);return c},l.V=function(g,a){var d,b,f,i,j,k,m,n,l;if((k=null!=g._omsData)&&this.keepSpiderfied||this.unspiderfy(),k||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",g,a);for(k=[],m=[],d=this.nearbyDistance,n=d*d,j=this.f(g.position),l=this.a,d=0,b=l.length;d<b;d++)f=l[d],null!=f.map&&f.getVisible()&&(i=this.f(f.position),this.i(i,j)<n?k.push({R:f,G:i}):m.push(f));return 1===k.length?this.trigger("click",g,a):this.W(k,m)},l.markersNearMarker=function(g,a){var d,b,f,e,c,i,j,k,l,h;if(null==a&&(a=!1),null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(d=this.nearbyDistance,j=d*d,c=this.f(g.position),i=[],k=this.a,d=0,b=k.length;d<b&&(f=k[d],!(f!==g&&null!=f.map&&f.getVisible()&&(e=this.f(null==(l=null==(h=f._omsData)?void 0:h.v)?f.position:l),this.i(e,c)<j&&(i.push(f),a))));d++);return i},l.F=function(){var g,a,d,b,f,e,c,i,j,k,h;if(null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";j=this.nearbyDistance,j*=j;var l;for(f=this.a,l=[],k=0,a=f.length;k<a;k++)b=f[k],l.push({H:this.f(null==(g=null==(d=b._omsData)?void 0:d.v)?b.position:g),b:!1});for(k=this.a,g=d=0,b=k.length;d<b;g=++d)if(a=k[g],null!=a.getMap()&&a.getVisible()&&(e=l[g],!e.b))for(h=this.a,a=i=0,f=h.length;i<f;a=++i)if(c=h[a],a!==g&&null!=c.getMap()&&c.getVisible()&&(c=l[a],(!(a<g)||c.b)&&this.i(e.H,c.H)<j)){e.b=c.b=!0;break}return l},l.markersNearAnyOtherMarker=function(){var f,a,d,b,c,e,g;for(c=this.F(),e=this.a,g=[],f=a=0,d=e.length;a<d;f=++a)b=e[f],c[f].b&&g.push(b);return g},l.setImmediate=function(b){return window.setTimeout(b,0)},l.h=function(){if(!this.basicFormatEvents&&null==this.l)return this.l=this.setImmediate(function(b){return function(){return b.l=null,null==b.g.getProjection()?null==b.B?b.B=i.addListenerOnce(b.map,"idle",function(){return b.w()}):void 0:b.w()}}(this))},l.w=function(){var f,a,d,b,c,e,g;if(this.basicFormatEvents){for(c=[],a=0,d=markers.length;a<d;a++)b=markers[a],f=null==b._omsData?"UNSPIDERFIED":"SPIDERFIED",c.push(this.trigger("format",b,this.constructor.markerStatus[f]));return c}for(c=this.F(),e=this.a,g=[],f=d=0,a=e.length;d<a;f=++d)b=e[f],f=null==b._omsData?c[f].b?"SPIDERFIABLE":"UNSPIDERFIABLE":"SPIDERFIED",g.push(this.trigger("format",b,this.constructor.markerStatus[f]));return g},l.P=function(b){return{m:function(a){return function(){return b._omsData.o.setOptions({strokeColor:a.legColors.highlighted[a.map.mapTypeId],zIndex:a.highlightedLegZIndex})}}(this),u:function(a){return function(){return b._omsData.o.setOptions({strokeColor:a.legColors.usual[a.map.mapTypeId],zIndex:a.usualLegZIndex})}}(this)}},l.W=function(h,a){var d,l,c,e,g,k,o,f,m,b;return this.J=!0,b=h.length,d=this.T(function(){var a,b,d;for(d=[],a=0,b=h.length;a<b;a++)f=h[a],d.push(f.G);return d}()),e=b>=this.circleSpiralSwitchover?this.M(b,d).reverse():this.L(b,d),d=function(){var a,b,d;for(d=[],a=0,b=e.length;a<b;a++)c=e[a],l=this.U(c),m=this.S(h,function(d){return function(a){return d.i(a.G,c)}}(this)),o=m.R,k=new j.Polyline({map:this.map,path:[o.position,l],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),o._omsData={v:o.getPosition(),X:o.getZIndex(),o:k},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(g=this.P(o),o._omsData.O={m:i.addListener(o,"mouseover",g.m),u:i.addListener(o,"mouseout",g.u)}),this.trigger("format",o,this.constructor.markerStatus.SPIDERFIED),o.setPosition(l),o.setZIndex(Math.round(this.spiderfiedZIndex+c.y)),d.push(o);return d}.call(this),delete this.J,this.I=!0,this.trigger("spiderfy",d,a)},l.unspiderfy=function(f){var a,d,b,c,e,g,j;if(null==f&&(f=null),null==this.I)return this;for(this.K=!0,j=[],e=[],g=this.a,a=0,d=g.length;a<d;a++)c=g[a],null==c._omsData?e.push(c):(c._omsData.o.setMap(null),c!==f&&c.setPosition(c._omsData.v),c.setZIndex(c._omsData.X),b=c._omsData.O,null!=b&&(i.removeListener(b.m),i.removeListener(b.u)),delete c._omsData,c!==f&&(b=this.basicFormatEvents?"UNSPIDERFIED":"SPIDERFIABLE",this.trigger("format",c,this.constructor.markerStatus[b])),j.push(c));return delete this.K,delete this.I,this.trigger("unspiderfy",j,e),this},l.i=function(e,a){var d,b;return d=e.x-a.x,b=e.y-a.y,d*d+b*b},l.T=function(d){var a,c,b,f,e;for(a=f=e=0,c=d.length;a<c;a++)b=d[a],f+=b.x,e+=b.y;return d=d.length,new j.Point(f/d,e/d)},l.f=function(b){return this.g.getProjection().fromLatLngToDivPixel(b)},l.U=function(b){return this.g.getProjection().fromDivPixelToLatLng(b)},l.S=function(f,a){var c,i,d,e,g,j;for(d=g=0,j=f.length;g<j;d=++g)(e=f[d],e=a(e),"undefined"===typeof c||null===c||e<i)&&(i=e,c=d);return f.splice(c,1)[0]},l.A=function(f,a){var c,b,d,e;if(null!=f.indexOf)return f.indexOf(a);for(c=b=0,d=f.length;b<d;c=++b)if(e=f[c],e===a)return c;return-1},a}(),b=/(\?.*(&|&amp;)|\?)spiderfier_callback=(\w+)/,a=document.currentScript,null==a&&(a=function(){var a,c,d,f,g;for(d=document.getElementsByTagName("script"),g=[],a=0,c=d.length;a<c;a++)e=d[a],null!=(f=e.getAttribute("src"))&&f.match(b)&&g.push(e);return g}()[0]),null!=a&&(a=null==(c=a.getAttribute("src"))||null==(d=c.match(b))?void 0:d[3])&&"function"===typeof window[a]&&window[a](),"function"===typeof window.spiderfier_callback&&window.spiderfier_callback()}).call(this);