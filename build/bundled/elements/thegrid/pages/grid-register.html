<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="register-components" assetpath="../components/"><template><style include="grid iron-flex">:host{display:block;}.logo-container{width:200px;height:48px;margin:20px auto;background:transparent;}.input-action{color:#FF3B30;cursor:pointer;user-select:none;padding:0 8px;}</style><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><div id="wr" class="wr"><form class="form" id="formCarousel" form-carousel=""><div class="form-group relative" data-step="1" data-question="What is your name?"><input id="name" type="text" class="form-input" autofocus="" autocomplete="off" placeholder="Full Name" value="{{name::input}}" data-validate="required" data-message-required="Your name is required."></div><div class="input-group suffix" data-step="2" data-question="Hello %name. Your Email?"><input id="email" name="email" type="text" class="input" autocomplete="off" on-keyup="checkEmailInput" placeholder="Email" value="{{email::input}}" data-validate="required|email" data-message-required="Your email is required." data-message-email="That email is invalid."><div class="addon-suffix"><div hidden$="[[!showEmailProvider]]"><div class="flex layout horizontal"><span class="input-action" on-click="gmail">Gmail</span> <span class="input-action" on-click="outlook">Outlook</span> <span class="input-action" on-click="icloud">iCloud</span></div></div></div></div><div class="input-group prefix" data-step="3" data-question="Phone Number"><div class="addon-prefix flex layout horizontal"><span>AE +971</span></div><input id="phone_number" type="text" class="input" autocomplete="off" placeholder="Phone Number" value="{{phone_number::input}}" data-validate="required|number" data-message-required="Your phone number is required." data-message-number="Your phone number is invalid."></div><div class="input-group suffix" data-step="4" data-question="Create Password. A strong one."><input id="password" type="password" class="input" autocomplete="off" placeholder="Password" value="{{password::input}}" data-validate="required" data-message-required="Your password is required."><div class="addon-suffix"><span id="passwordToggler" class="input-action" on-click="tooglePassword">[[togglePasswordText]]</span></div></div><div class="input-group" data-step="5" data-question="Your Gender?"><select id="gender" class="input" data-validate="required" data-message-required="Gender is required."><option value="">--Please select--</option><option value="0">Male</option><option value="1">Female</option></select></div><div class="input-group" data-step="6" data-question="When is your birthday?"><input id="birth_date" type="date" class="input" max="[[_today()]]" autocomplete="off" placeholder="MM//DD/YYYY" value="{{birth_date::input}}" data-validate="required" data-message-required="Birthdate is required."></div><div class="input-group" data-step="7" data-question="Pick your Username."><input id="username" type="text" class="input" on-keyup="showNext" autocomplete="off" placeholder="User name" value="{{username::input}}" data-validate="required" data-message-required="Username is required."></div></form></div></div></template><script>class RegisterComponents extends FormSliderBehavior(ReduxBehavior(Polymer.Element)){static get is(){return'register-components'}static get properties(){return{togglePasswordText:{type:String,value:'Show'},isPasswordHidden:{type:Boolean,value:!0},isSigningUp:{type:Boolean,value:!1},isRegistered:{type:Boolean,value:!1,notify:!0},signUpData:{type:Object,value:{message:null},notify:!0},hasErrorRegister:{type:Boolean,value:!1,notify:!0},next:{type:Boolean,value:!1,notify:!0},submiting:{type:Boolean,notify:!0},showEmailProvider:{type:Boolean,value:!1}}}static get observers(){return['_passwordState(isPasswordHidden)','_submitingChange(submiting)']}static get actions(){return{giveAccess(a){return{type:'GIVE_ACCESS',token:a.access_token,user:a.user}}}}constructor(){super(),this.fc=null,this.wr=null}connectedCallback(){super.connectedCallback(),this.passwordToggler=this.$.passwordToggler,this.initForm(),this.set('step.message','The Grid Registration')}signUp(){const a=this;a.isSigningUp=!0,axios.post(API_URL+'/users/register',{name:a.name,username:a.username,email:a.email,password:a.password,gender:a.$.gender.value,birth_date:a.birth_date,phone_number:a.phone_number}).then((b)=>{a.set('signUpData.message','Successfully Registered!'),a.isSigningUp=!1,a.isRegistered=!0,a.arrangeSteps(1),a.set('step.message','Successfully Registered!'),a.fc.reset(),a.submiting=!1,localStorage.setItem('user_id',b.data.user.id),localStorage.setItem('email',b.data.user.email),a.dispatch('giveAccess',b.data)}).catch((b)=>{if(b.response){a.set('signUpData',b.response.data);var c=[],d=null;for(var e in this.signUpData)c.push(this.signUpData[e]),d||(d=e);a.set('step.message',this.signUpData[d][0]);let f=a.fc.querySelector('#'+d).parentNode.getAttribute('data-step');a.arrangeSteps(f),a.submiting=!1}a.isSigningUp=!1})}checkEmailInput(){!this.email||-1<this.email.indexOf('@')&&(this.showEmailProvider=!0)}tooglePassword(){this.isPasswordHidden=!this.isPasswordHidden}showNext(){this.next=!!this.username}updateEmail(a){const b=this.email;if(1<=b.lastIndexOf('@')){var c=b.substring(0,b.lastIndexOf('@')+1);return void(this.email=c+a)}this.email+='@'+a}gmail(){this.updateEmail('gmail.com')}outlook(){this.updateEmail('outlook.com')}icloud(){this.updateEmail('icloud.com')}_passwordState(a){a?(this.togglePasswordText='Show',this.$.password.setAttribute('type','password')):(this.togglePasswordText='Hide',this.$.password.setAttribute('type','text'))}_submitingChange(a){a&&this.signUp()}_today(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return 10>b&&(b='0'+b),10>c&&(c='0'+c),a=c+'/'+b+'/'+d,a}}customElements.define(RegisterComponents.is,RegisterComponents);</script></dom-module><link rel="import" href="register/grid-register-1.html"><link rel="import" href="register/grid-register-2.html"></div><dom-module id="grid-register"><template><style include="iron-flex grid">:host{display:block;margin:0 auto;position:relative;width:100%;height:100%;background:linear-gradient(209.36deg, #FF3B30 0%, #FF2D55 100%);}.sub-page{width:100%;left:0;position:absolute;}</style><app-location route="{{route}}" use-hash-as-path=""></app-location><app-route route="{{route}}" pattern=":id" data="{{step}}"></app-route><paper-toast id="registerMessageToast" duration="0" class="fit-bottom"><div class="layout horizontal"><span class="flex">[[signUpData.message]]</span></div></paper-toast><template is="dom-if" if="[[submiting]]"><div class="overlay loading-bg"><div class="align-center"><img src="/assets/images/thegrid.svg" alt="THE GRID"><br><paper-spinner active$="[[submiting]]"></paper-spinner></div></div></template><iron-pages attr-for-selected="data-page" selected="[[step.id]]"><section data-page="0" class="sub-page"><grid-verify id="verify"></grid-verify></section><section data-page="1" class="sub-page"><grid-register-1 data="{{step1Data}}"></grid-register-1></section><section data-page="2" class="sub-page"><grid-register-2 data="{{step1Data}}"></grid-register-2></section></iron-pages><template is="dom-if" if="[[isRegistering]]"><div class="overlay red-bg"><div class="align-center"><h3 class="white">Loading please wait...</h3><br><paper-spinner active$="[[isRegistering]]"></paper-spinner></div></div></template></template><script>class GridRegister extends GridNavigation(Polymer.Element){static get is(){return'grid-register'}static get properties(){return{}}static get observers(){return['_registered(isRegistered)','_hasErrorRegister(hasErrorRegister)','_currentStepChange(currentStep)','_totalStepsChange(totalSteps)','_nextChange(next)','_subrouteChange(subroute)','_subrouteDataChange(subrouteData)']}constructor(){super(),this.isRegistering=!1}connectedCallback(){super.connectedCallback(),window.addEventListener('registering',()=>{this.isRegistering=!0}),window.addEventListener('done-registering-step1',()=>{this.isRegistering=!1}),window.addEventListener('done-registering',()=>{this.isRegistering=!1,this.redirectHome()})}_registered(a){a&&(this.$.registerMessageToast.fitInto=this,this.$.registerMessageToast.open(),setTimeout(()=>{this.redirectHome(),window.dispatchEvent(new CustomEvent('open-drawer'))},2e3))}_currentStepChange(a){const b=this.$.indicator;var c=b.querySelectorAll('[data-step]');c.length&&c.forEach(function(b){b.classList.remove('active'),b.getAttribute('data-step')==a&&b.classList.add('active')})}_totalStepsChange(){const a=this,b=a.$.indicator;for(var c=1;c<=a.totalSteps;c++){let a=document.createElement('span');a.setAttribute('data-step',c),b.appendChild(a)}}submit(){this.next&&(this.submiting=!0)}_nextChange(a){a&&(this.$.next.classList.remove('inactive'),this.$.next.classList.add('pointer'))}_registerChange(a){const b=this.shadowRoot.querySelector('#'+a.step),c=this;c.subPage=null;a.step&&b&&(c.subPage=a.step,Polymer.Base.importHref('/elements/thegrid/pages/register/grid-'+a.step+'.html',()=>{}))}_subrouteChange(a){''==a.path&&(this.set('subrouteData.id',null),this.subPage=null)}_subrouteDataChange(a){const b=this.shadowRoot.querySelector('#'+a.id),c=this;a.id&&b&&(a.id?Polymer.Base.importHref('/elements/thegrid/pages/register/grid-'+a.id+'.html?v=1.0.1',()=>{c.subPage=a.id}):c.subPage=null)}}customElements.define(GridRegister.is,GridRegister);</script></dom-module></body></html>