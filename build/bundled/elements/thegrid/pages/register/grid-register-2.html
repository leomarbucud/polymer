<html><head></head><body><dom-module id="grid-register-2"><template><style include="grid iron-flex">:host{display:block;}.logo-container{width:200px;height:48px;margin:20px auto;background:transparent;}.input-action{color:#FF3B30;cursor:pointer;user-select:none;padding:0 8px;}</style><div id="toolbar" class="toolbar"><div class="flex"><paper-icon-button icon="chevron-left" class="white pointer" on-click="goStep1"></paper-icon-button></div><div id="indicator"></div><div class="flex align-right"><paper-button id="next" class="white pointer" on-click="signUp" hidden$="[[!readyNext]]">SIGN UP</paper-button></div></div><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><div id="wr" class="wr"><form class="form" id="formCarousel" form-carousel=""><div class="input-group" data-step="1" data-question="Your Gender?"><select id="gender" class="input" data-validate="required" data-message-required="Gender is required."><option value="">--Please select--</option><option value="0">Male</option><option value="1">Female</option></select></div><div class="input-group" data-step="2" data-question="When is your birthday?"><input id="birth_date" type="text" class="input" max="[[_today()]]" autocomplete="off" placeholder="MM//DD/YYYY" value="{{birth_date::input}}" data-validate="required" data-message-required="Birthdate is required." date-picker="#date-picker" readonly=""></div><div class="input-group" data-step="3" data-question="Pick your Username."><input id="username" type="text" class="input" autocomplete="off" placeholder="User name" value="{{username::input}}" data-validate="required" data-message-required="Username is required."></div></form></div></div><grid-date-picker id="date-picker" date-from="{{birth_date}}" no-range="true" enable-year-change="true" birth-date="true"></grid-date-picker></template><script>class GridRegister2 extends GridNavigation(FormSliderBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-register-2'}static get properties(){return{}}static get observers(){return['_formDone(gender, birth_date, username)']}static get actions(){return{giveAccess(a){return{type:'GIVE_ACCESS',token:a.access_token,user:a.user}}}}constructor(){super(),this.readyNext=!1;var a=window.localStorage.getItem('social_user');a&&(a=JSON.parse(a),this.user_id=a.id)}connectedCallback(){super.connectedCallback();const a=this;this.passwordToggler=this.$.passwordToggler,this.initForm(),this.set('step.message','Tell us more');const b=this.shadowRoot.querySelector('#gender');b.addEventListener('change',function(){a.gender=this.value});const c=()=>{let a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear()-18;return 10>b&&(b='0'+b),10>c&&(c='0'+c),a=d+'-'+c+'-'+b,a},d=this.shadowRoot.querySelector('#birth_date');d.setAttribute('max',c()),this.goStep1();const e=this.shadowRoot.querySelector('[date-picker]');e.addEventListener('click',()=>{let a=e.getAttribute('date-picker');const b=this.shadowRoot.querySelector(a);b.max=moment(c()).unix(),b.open()})}signUp(){const a=this;window.dispatchEvent(new CustomEvent('registering'));var b={name:a.data.name,email:a.data.email,phone_number:a.data.phone_number,phone_code:a.data.phone_code,password:a.data.password,country_id:a.data.country_id,gender:a.gender,birth_date:a.birth_date,username:a.username};this.user_id&&(b.user_id=this.user_id),axios.post(API_URL+'/users/register',b).then((b)=>{a.dispatch('giveAccess',b.data),window.dispatchEvent(new CustomEvent('done-registering'))}).catch((b)=>{if(b.response){var c=b.response.data,d=[],e=null;for(var f in c)d.push(c[f]),e||(e=f);a.set('step.message',c[e][0]);let g=a.fc.querySelector('#'+e).parentNode.getAttribute('data-step');a.arrangeSteps(g)}window.dispatchEvent(new CustomEvent('error-register'))})}goStep1(){this.redirect('/register#1')}_formDone(a,b,c){this.readyNext=!1,a&&b&&c&&(this.readyNext=!0)}}customElements.define(GridRegister2.is,GridRegister2);</script></dom-module></body></html>