<html><head></head><body><dom-module id="grid-register-1"><template><style include="grid iron-flex">:host{display:block;}.logo-container{width:200px;height:48px;margin:20px auto;background:transparent;}.input-action{color:#FF3B30;cursor:pointer;user-select:none;padding:0 8px;}</style><div class="toolbar"><div class="flex"><paper-icon-button icon="close" class="white pointer" on-click="redirectHome"></paper-icon-button></div><div id="indicator"></div><div class="flex align-right"><paper-button id="next" class="white pointer" on-click="submit" hidden$="[[!readyNext]]">Next</paper-button></div></div><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><div id="wr" class="wr"><form class="form" id="formCarousel" form-carousel=""><div class="form-group relative" data-step="1" data-question="What is your name?"><input id="name" type="text" class="form-input" autofocus="" autocomplete="off" placeholder="Full Name" value="{{name::input}}" data-validate="required" data-message-required="Your name is required."></div><div class="input-group suffix" data-step="2" data-question="Hello! Your email?"><input id="email" name="email" type="text" class="input" autocomplete="off" on-keyup="checkEmailInput" placeholder="Email" value="{{email::input}}" data-validate="required|email" data-message-required="Your email is required." data-message-email="That email is invalid."><div class="addon-suffix"><div hidden$="[[!showEmailProvider]]"><div class="flex layout horizontal"><span class="input-action" on-click="gmail">Gmail</span> <span class="input-action" on-click="outlook">Outlook</span> <span class="input-action" on-click="icloud">iCloud</span></div></div></div></div><div class="input-group prefix" data-step="3" data-question="Phone Number"><div class="addon-prefix flex layout horizontal"><span>[[ phone_code_text ]]</span></div><input id="phone_number" type="text" class="input" autocomplete="off" placeholder="Phone Number" value="{{phone_number::input}}" data-validate="required|number" data-message-required="Your phone number is required." data-message-number="Your phone number is invalid."></div><div class="input-group suffix" data-step="4" data-question="Create Password. A strong one."><input id="password" type="password" class="input" autocomplete="off" placeholder="Password" value="{{password::input}}" data-validate="required" data-message-required="Your password is required."><div class="addon-suffix"><span id="passwordToggler" class="input-action" on-click="tooglePassword">[[togglePasswordText]]</span></div></div></form></div></div></template><script>class GridRegister1 extends FormSliderBehavior(GridNavigation(Polymer.Element)){static get is(){return'grid-register-1'}static get properties(){return{togglePasswordText:{type:String,value:'Show'},isPasswordHidden:{type:Boolean,value:!0},isSigningUp:{type:Boolean,value:!1},isRegistered:{type:Boolean,value:!1,notify:!0},signUpData:{type:Object,value:{message:null},notify:!0},hasErrorRegister:{type:Boolean,value:!1,notify:!0},next:{type:Boolean,value:!1,notify:!0},submiting:{type:Boolean,notify:!0},showEmailProvider:{type:Boolean,value:!1},data:{type:Object,notify:!0}}}static get observers(){return['_passwordState(isPasswordHidden)','_formDone(name, email, phone_number, password)','_nameChange(name)']}_nameChange(a){this.shadowRoot.querySelector('div[data-step="2"]').setAttribute('data-question','Hello '+a+'. Your Email?')}static get actions(){return{giveAccess(a){return{type:'GIVE_ACCESS',token:a.access_token,user:a.user}}}}constructor(){super(),this.readyNext=!1;var a=window.localStorage.getItem('social_user');a&&(a=JSON.parse(a),this.name=a.name,this.email=a.email,this.user_id=a.id),this.phone_code_text='...',this.phone_code='',this.country_id=null}connectedCallback(){super.connectedCallback(),this.passwordToggler=this.$.passwordToggler,this.initForm(),this.set('step.message','The Grid Registration'),this.getPhoneCode()}getPhoneCode(){axios.get(`${this.url.API_URL}/getCountryDetails`).then((a)=>{this.phone_code_text=`${a.data.iso} +${a.data.phonecode}`,this.phone_code=`+${a.data.phonecode}`,this.country_id=a.data.id}).catch(()=>{})}submit(){window.dispatchEvent(new CustomEvent('registering')),this.data={name:this.name,email:this.email,phone_number:this.phone_number,password:this.password,phone_code:this.phone_code,country_id:this.country_id},this.user_id&&(this.data.user_id=this.user_id),axios.post(API_URL+'/register/step1',this.data).then(()=>{this.step1=!0,this.redirect('/register#2'),window.dispatchEvent(new CustomEvent('done-registering-step1'))}).catch((a)=>{if(a.response){var b=a.response.data,c=[],d=null;for(var e in b)c.push(b[e]),d||(d=e);this.set('step.message',b[d][0]);let f=this.fc.querySelector('#'+d).parentNode.getAttribute('data-step');this.arrangeSteps(f)}window.dispatchEvent(new CustomEvent('done-registering-step1'))})}checkEmailInput(){!this.email||-1<this.email.indexOf('@')&&(this.showEmailProvider=!0)}tooglePassword(){this.isPasswordHidden=!this.isPasswordHidden}updateEmail(a){const b=this.email;if(1<=b.lastIndexOf('@')){var c=b.substring(0,b.lastIndexOf('@')+1);return void(this.email=c+a)}this.email+='@'+a}gmail(){this.updateEmail('gmail.com')}outlook(){this.updateEmail('outlook.com')}icloud(){this.updateEmail('icloud.com')}_passwordState(a){a?(this.togglePasswordText='Show',this.$.password.setAttribute('type','password')):(this.togglePasswordText='Hide',this.$.password.setAttribute('type','text'))}_formDone(a,b,c,d){this.readyNext=!1,a&&b&&c&&d&&(this.readyNext=!0)}}customElements.define(GridRegister1.is,GridRegister1);</script></dom-module></body></html>