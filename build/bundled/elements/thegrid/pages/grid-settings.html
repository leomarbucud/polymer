<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="grid-settings-username" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Username</span></div><main class="flex"><section class="p-y-1"><paper-input class="red" value="@[[user.username]]" readonly=""></paper-input><div class="desc"><div>Share your profile with others</div><div>[[url.APP_URL]]/@[[user.username]]</div></div></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsUsername extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-username'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.email=this.user.email,this.old_password='',this.new_password='',this.password='',this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateEmail(){this.isLoading=!0,this.openToast('Updating email, please wait...'),gAxios.post('/users/'+this.user.id+'/settings/account/email',{email:this.email}).then((a)=>{console.log(a.data),this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&console.log(a.response.data)}).then(()=>{this.isLoading=!1})}updatePassword(){this.isLoading=!0,this.openToast('Updating password, please wait...'),gAxios.post('/users/'+this.user.id+'/settings/account/password',{old_password:this.old_password,password:this.new_password,password_confirmation:this.confirm_password}).then((a)=>{console.log(a.data),this.openToast('Successfully updated')}).catch((a)=>{if(a.response){console.log(a.response.data);const b=a.response.data;if(b.message)return console.log('data.message',b.message),void this.openToast(b.message);if(b.password)return void this.openToast(b.password[0])}}).then(()=>{this.isLoading=!1})}}customElements.define(GridSettingsUsername.is,GridSettingsUsername);</script></dom-module><dom-module id="grid-settings-name" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Name</span><paper-icon-button icon="check" on-click="updateName" class="red"></paper-icon-button></div><main class="flex"><section class="p-y-1"><paper-input class="red" label="Display Name" value="{{name::input}}"></paper-input><paper-input class="red" label="First Name" value="{{first_name::input}}"></paper-input><paper-input class="red" label="Last Name" value="{{last_name::input}}"></paper-input><div class="desc"><div>You can change your name only once every 90 days. Make sure to avoid unusual capitalization or adding random words.</div></div></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsName extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-name'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.name=this.user.name,this.user.profile&&(this.first_name=this.user.profile.first_name,this.last_name=this.user.profile.last_name),this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateName(){this.isLoading=!0,this.openToast('Updating your name, please wait...'),gAxios.post(`/users/${this.user.id}/settings/name`,{name:this.name,first_name:this.first_name,last_name:this.last_name}).then((a)=>{console.log(a.data),this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&console.log(a.response.data)}).then(()=>{this.isLoading=!1})}}customElements.define(GridSettingsName.is,GridSettingsName);</script></dom-module><dom-module id="grid-settings-locations" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.map-control{position:absolute !important;z-index:99;width:100%;display:none;}.map-control.active{display:block !important;}.map-control.map-control-input{top:0;}.map-control .input-group{padding:0;}.map-control.map-control-marker{width:27px;height:33px;top:calc(50% - 33px);left:calc(50% - 13px);pointer-events:none;}.map-control.map-control-button{bottom:0;margin:0;text-align:center;background:var(--red);color:#FFFFFF;border-radius:0;}#addFab{position:absolute;right:16px;bottom:22px;}#location-dialog, #action-dialog{background:var(--light-grey);color:#FFFFFF;min-width:314px;}main{background-color:var(--light-grey);}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Locations</span><paper-icon-button icon="add" class="red" on-tap="showMap"></paper-icon-button></div><main class="flex"><div role="list" class="white"><template is="dom-repeat" items="[[user.locations]]" as="loc"><paper-item on-click="openActionDialog"><paper-item-body two-line=""><div>[[loc.alias]]</div><div secondary="">[[loc.location]]</div></paper-item-body></paper-item></template></div></main><div class="map-control map-control-input"><div class="top-search-bar active"><div class="toolbar shadow"><div class="input-group suffix prefix"><div class="addon-prefix has-button"><paper-icon-button icon="chevron-left" class="pointer" on-click="closeSearchBar"></paper-icon-button></div><input id="search-location" type="text" class="input input-location" value="{{search::input}}" placeholder="Search..."><div class="addon-suffix has-button"><paper-icon-button icon="close" class="pointer" on-click="clearSearchBar"></paper-icon-button></div></div></div></div></div><iron-icon class="map-control map-control-marker" src="/assets/images/icons/related-marker.svg"></iron-icon><paper-button class="map-control map-control-button" on-tap="hideMap">Done</paper-button><paper-toast id="toast" class="fit-bottom"></paper-toast><paper-dialog id="location-dialog"><div><paper-input label="Name" class="red" value="{{name::input}}"></paper-input><paper-input label="Address" class="red" value="{{address::input}}"></paper-input><small class="block">Latitude: [[lat]] </small><small class="block">Longitude: [[lng]]</small></div><div class="buttons"><paper-button dialog-dismiss="" class="white">Cancel</paper-button><paper-button dialog-confirm="" autofocus="" on-click="saveLocation" class="white">Save</paper-button></div></paper-dialog><paper-dialog id="action-dialog"><h2>[[name]]</h2><div><p>[[address]]</p><small class="block">Latitude: [[lat]] </small><small class="block">Longitude: [[lng]]</small></div><div class="buttons"><paper-button dialog-dismiss="" autofocus="" on-click="openEditLocation" class="white">Edit</paper-button><paper-button dialog-confirm="" on-click="deleteLocation" class="white">Delete</paper-button></div></paper-dialog><gmap-search id="gmap-search" location="{{location}}"></gmap-search></template><script>class GridSettingsLocations extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-locations'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}static get observers(){return['_isMapInit(gmap)','_locationChange(location)']}constructor(){super(),window.addEventListener('map:center_changed',(a)=>{let b=a.detail;this.lat=b.lat,this.lng=b.lng}),this.locations=[],this.editLocation=!1}get gmapSearch(){return this.shadowRoot.querySelector('#gmap-search')}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this}saveLocations(){this.openToast('Saving your locations...'),gAxios.post('/users/'+this.user.id+'/settings/locations',{home:this.home,work:this.work}).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully saved!')})}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}showMap(){this.gmapSearch.open()}closeSearchBar(){this.hideMap(!1)}clearSearchBar(){this.search='';const a=this.shadowRoot.querySelector('.top-search-bar');a.querySelector('input').focus()}hideMap(a=!0){const b=this.gmap;if(!b)return;this._setMarkerVisibility(!0);var c=this.shadowRoot.querySelectorAll('.map-control');if(c.forEach((a)=>{a.classList.remove('active')}),!a)return;const d={lat:this.lat,lng:this.lng};b.geocodeLatLng(d).then((a)=>{let b=a[0].formatted_address;const c={location:b,lat:d.lat,lng:d.lng};this.setLocation(c)}).catch((a)=>{console.log(a)})}myLocation(a){const b=this,c=a.target;this.targetLocation=a.target.getAttribute('data-location'),navigator.geolocation&&(c.classList.add('inactive'),navigator.geolocation.getCurrentPosition((a)=>{let b={lat:a.coords.latitude,lng:a.coords.longitude};this.gmap.map.setCenter(b),this.gmap.geocodeLatLng(b).then((a)=>{let d=a[0].formatted_address;const e={location:d,lat:b.lat,lng:b.lng};this.setLocation(e),c.classList.remove('inactive')}).catch((a)=>{console.log(a)})}))}saveLocation(){this.openToast('Saving your locations...');let a=[],b=[];this.user.locations&&(a=b=this.user.locations.slice(0)),this.editLocation?a=b.map((a)=>a.id==this.location_id?{id:a.id,user_id:this.user.id,lat:this.lat,lng:this.lng,location:this.address,alias:this.name}:a):a.push({id:0,user_id:this.user.id,lat:this.lat,lng:this.lng,location:this.address,alias:this.name}),gAxios.post(`/users/${this.user.id}/settings/locations`,{locations:a}).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully saved!'),this.editLocation=!1})}openAddLocationDialog(a){const b=this.shadowRoot.querySelector('#location-dialog');this.address=a.location,this.lat=a.lat,this.lng=a.lng,b.open()}openActionDialog(a){const b=a.model.loc,c=this.shadowRoot.querySelector('#action-dialog');this.address=b.location,this.lat=b.lat,this.lng=b.lng,this.location_id=b.id,this.name=b.alias,c.open()}openEditLocation(){this.editLocation=!0,this.showMap();let a=new google.maps.LatLng(this.lat,this.lng);this.gmapSearch.map.setCenter(a)}deleteLocation(){this.openToast(`Deleting ${this.name}...`),gAxios.delete(`/users/${this.user.id}/settings/locations/${this.location_id}`).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully deleted!')})}setLocation(a){this.openAddLocationDialog(a)}_locationChange(a){a&&this.setLocation(a)}_setMarkerVisibility(a){const b=this.gmap;b&&(a?b.classList.remove('selecting'):b.classList.add('selecting'),b.markers.forEach((b)=>{b.setVisible(a)}),b.markerClusterer.repaint())}_isMapInit(a){if(a.map)for(let b of this.shadowRoot.querySelectorAll('.input-location'))if(b){const c=new google.maps.places.SearchBox(b);c.addListener('places_changed',()=>{const d=c.getPlaces();if(0!=d.length){const c=new google.maps.LatLngBounds;for(var e,f=0;e=d[f];f++)c.extend(e.geometry.location);a.map.fitBounds(c);const g={lat:this.gmap.map.getCenter().lat(),lng:this.gmap.map.getCenter().lng()};if(b.getAttribute('data-location')){const a={location:b.value,lat:g.lat,lng:g.lng};this.targetLocation=b.getAttribute('data-location'),this.setLocation(a)}}})}}}customElements.define(GridSettingsLocations.is,GridSettingsLocations);</script></dom-module><dom-module id="grid-settings-password" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Password</span><paper-icon-button icon="check" on-click="updatePassword" class="red"></paper-icon-button></div><main class="flex"><section class="p-y-1"><paper-input class="red" type="password" label="Old Password" value="{{old_password::input}}"></paper-input><paper-input class="red" type="password" label="New Password" value="{{new_password::input}}"></paper-input><paper-input class="red" type="password" label="Confim Password" value="{{confirm_password::input}}"></paper-input></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsPassword extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-password'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.old_password='',this.new_password='',this.confirm_password='',this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updatePassword(){this.isLoading=!0,this.openToast('Updating password, please wait...'),gAxios.post(`/users/${this.user.id}/settings/account/password`,{old_password:this.old_password,password:this.new_password,password_confirmation:this.confirm_password}).then(()=>{this.openToast('Successfully updated')}).catch((a)=>{if(a.response){const b=a.response.data;if(b.message)return void this.openToast(b.message);if(b.password)return void this.openToast(b.password[0])}}).then(()=>{this.isLoading=!1,this.old_password='',this.new_password='',this.confirm_password=''})}}customElements.define(GridSettingsPassword.is,GridSettingsPassword);</script></dom-module><dom-module id="grid-settings-verification" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Email ID</span></div><main class="flex"><section class="p-y-1 white"><template is="dom-if" if="[[!user.confirmed]]"><p>Your Email ID is not yet verified. Please check your email and click the verification link</p><p>No email? Click <span class="red pointer" on-click="resendLink">resend</span>.</p></template><template is="dom-if" if="[[  user.confirmed]]"><p>Your Email ID is verified.</p></template><paper-input class="red" value="[[user.email]]" readonly=""></paper-input><template is="dom-if" if="[[sent]]"><p>Please check your email and click the link.</p></template></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsVerification extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-verification'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}resendLink(){this.isLoading=!0,this.openToast('Sending email, please wait...'),gAxios.post(`/users/${this.user.id}/email/verification/resend`).then((a)=>{console.log(a.data),'ok'==a.data.status?(this.openToast('Successfully send'),this.sent=!0):(this.openToast('Oops something went wrong...'),this.sent=!1)}).catch((a)=>{a.response&&(console.log(a.response.data),this.openToast('Oops something went wrong...')),this.sent=!1}).then(()=>{this.isLoading=!1})}}customElements.define(GridSettingsVerification.is,GridSettingsVerification);</script></dom-module><dom-module id="grid-settings-mobile" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Mobile Number</span><paper-button class="white" on-click="updateMobileNumber">Update</paper-button></div><main class="flex"><section class="p-y-1 white"><paper-input label="Mobile Number" class="red" value="{{phone_number}}"></paper-input></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsMobile extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-mobile'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this,this.phone_number=this.user.phone_number}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateMobileNumber(){this.isLoading=!0,this.openToast('Updating your mobile number, please wait...'),gAxios.post(`/users/${this.user.id}/settings/mobile`,{phone_number:this.phone_number}).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&(console.log(a.response.data),this.openToast('Oops something went wrong...')),this.sent=!1}).then(()=>{this.isLoading=!1})}}customElements.define(GridSettingsMobile.is,GridSettingsMobile);</script></dom-module><dom-module id="grid-settings-general" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span class="flex"></span></div><main class="flex"><section class="p-y-1 title"><h1 class="white m-0">General Settings</h1></section><section class="p-y-1"><div class="input-group"><label>Username</label><input type="text" value="{{username::input}}" class="input" placeholder="Username"></div><div class="input-group"><label>Display Name</label><input type="text" value="{{name::input}}" class="input" placeholder="Name"></div><div class="input-group"><label>First Name</label><input type="text" value="{{first_name::input}}" class="input" placeholder="First Name"></div><div class="input-group"><label>Middle Name</label><input type="text" value="{{middle_name::input}}" class="input" placeholder="Middle Name"></div><div class="input-group"><label>Last Name</label><input type="text" value="{{last_name::input}}" class="input" placeholder="Last Name"></div><div class="input-group"><label>About</label><textarea rows="6" max="191" class="input" value="{{about::input}}" style="resize: none; height: 150px; padding: 16px" placeholder="Start typing.."></textarea></div><button on-click="save">Update</button></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsGeneral extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-general'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.username=this.user.username,this.name=this.user.name,this.user.profile&&(this.first_name=this.user.profile.first_name,this.middle_name=this.user.profile.middle_name,this.last_name=this.user.profile.last_name,this.about=this.user.profile.bio),this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}save(){this.openToast('Updating your details, please wait...'),gAxios.post('/users/'+this.user.id+'/settings/general',{user:{username:this.username,name:this.name},profile:{first_name:this.first_name,middle_name:this.middle_name,last_name:this.last_name,bio:this.about}}).then((a)=>{console.log(a.data),this.dispatch('updateUser',a.data),this.openToast('Successfully updated!')}).catch((a)=>{a.response})}}customElements.define(GridSettingsGeneral.is,GridSettingsGeneral);</script></dom-module><dom-module id="grid-settings-account" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span class="flex"></span></div><main class="flex"><section class="p-y-1 title"><h1 class="white m-0">Account Settings</h1></section><section class="p-y-1"><div class="input-group"><label>Email</label><input type="text" value="{{email::input}}" class="input" placeholder="Eamil"></div><button on-click="updateEmail">Update Email</button><div class="input-group"><label>Old Password</label><input type="password" value="{{old_password::input}}" class="input" placeholder="Password"></div><div class="input-group"><label>New Password</label><input type="password" value="{{new_password::input}}" class="input" placeholder="New Password"></div><div class="input-group"><label>Confirm Password</label><input type="password" value="{{confirm_password::input}}" class="input" placeholder="Confirm Password"></div><button on-click="updatePassword">Update Password</button></section></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsAccount extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-account'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.email=this.user.email,this.old_password='',this.new_password='',this.password='',this.$.toast.fitInto=this}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateEmail(){this.isLoading=!0,this.openToast('Updating email, please wait...'),gAxios.post('/users/'+this.user.id+'/settings/account/email',{email:this.email}).then((a)=>{console.log(a.data),this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&console.log(a.response.data)}).then(()=>{this.isLoading=!1})}updatePassword(){this.isLoading=!0,this.openToast('Updating password, please wait...'),gAxios.post('/users/'+this.user.id+'/settings/account/password',{old_password:this.old_password,password:this.new_password,password_confirmation:this.confirm_password}).then((a)=>{console.log(a.data),this.openToast('Successfully updated')}).catch((a)=>{if(a.response){console.log(a.response.data);const b=a.response.data;if(b.message)return console.log('data.message',b.message),void this.openToast(b.message);if(b.password)return void this.openToast(b.password[0])}}).then(()=>{this.isLoading=!1})}}customElements.define(GridSettingsAccount.is,GridSettingsAccount);</script></dom-module><dom-module id="grid-settings-account-visibility" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Acount Visibility</span></div><main class="flex"><div role="item" class="white"><template is="dom-repeat" items="[[visibilities]]" as="v"><paper-item on-click="setVisibility"><div class="layout horizontal flex"><div class="flex">[[v.name]]</div><paper-radio-button checked="[[v.selected]]" on-change="_setVisible"></paper-radio-button></div></paper-item></template></div></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsAccountVisibility extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-account-visibility'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object,visibilities:{type:Array,value:[{name:'Public',value:'public',selected:!0},{name:'Users',value:'users',selected:!1},{name:'Only Me',value:'onlyme',selected:!1}]}}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this,this.user.keyedSettings&&this.user.keyedSettings.visibility&&this.updateSelection(this.user.keyedSettings.visibility)}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateSelection(a){let b=this.visibilities.slice(0);b.map((b)=>(b.selected=b.value==a.value,b)),this.set('visibilities',b);for(let b=0;b<this.visibilities.length;b++)this.notifyPath(`visibilities.${b}.selected`,this.visibilities[b].selected);this.updateVisibility()}setVisibility(a){const b=a.model.v;this.visible=b.value,this.updateSelection(b)}updateVisibility(){this.isLoading=!0,this.openToast('Updating your account visibility, please wait...'),gAxios.post(`/users/${this.user.id}/settings/privacy`,{id:0,name:'visibility',value:this.visible}).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&(console.log(a.response.data),this.openToast('Oops something went wrong...')),this.sent=!1}).then(()=>{this.isLoading=!1})}_setVisible(a){const b=a.model.v;this.visible=b.value}}customElements.define(GridSettingsAccountVisibility.is,GridSettingsAccountVisibility);</script></dom-module><dom-module id="grid-settings-contact-information" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Contact Information</span></div><main class="flex"><div role="item" class="white"><template is="dom-repeat" items="[[visibilities]]" as="v"><paper-item on-click="setVisibility"><div class="layout horizontal flex"><div class="flex">[[v.name]]</div><paper-radio-button checked="[[v.selected]]" on-change="_setVisible"></paper-radio-button></div></paper-item></template></div></main><paper-toast id="toast" class="fit-bottom"></paper-toast></template><script>class GridSettingsContactInformation extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-contact-information'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object,visibilities:{type:Array,value:[{name:'Public',value:'public',selected:!0},{name:'Users',value:'users',selected:!1},{name:'Only Me',value:'onlyme',selected:!1}]}}}constructor(){super()}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this,this.user.keyedSettings&&this.user.keyedSettings.contact&&this.updateSelection(this.user.keyedSettings.contact)}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}updateSelection(a){let b=this.visibilities.slice(0);b.map((b)=>(b.selected=b.value==a.value,b)),this.set('visibilities',b);for(let b=0;b<this.visibilities.length;b++)this.notifyPath(`visibilities.${b}.selected`,this.visibilities[b].selected);this.updateVisibility()}setVisibility(a){const b=a.model.v;this.visible=b.value,this.updateSelection(b)}updateVisibility(){this.isLoading=!0,this.openToast('Updating your contact information, please wait...'),gAxios.post(`/users/${this.user.id}/settings/privacy`,{id:0,name:'contact',value:this.visible}).then((a)=>{this.dispatch('updateUser',a.data),this.openToast('Successfully updated')}).catch((a)=>{a.response&&(console.log(a.response.data),this.openToast('Oops something went wrong...')),this.sent=!1}).then(()=>{this.isLoading=!1})}_setVisible(a){const b=a.model.v;this.visible=b.value}}customElements.define(GridSettingsContactInformation.is,GridSettingsContactInformation);</script></dom-module><dom-module id="grid-settings-activity-log" assetpath="settings/"><template><style include="grid iron-flex">:host{position:relative;background:var(--dark-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{background-color:var(--light-grey);}.desc{color:#FFFFFF;font-size:14px;line-height:24px;padding:16px 0;}</style><div id="toolbar" class="toolbar dgrey-bg"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectSettings"></paper-icon-button><span id="toolbar-title" class="flex active">Activity Logs</span></div><main class="flex"><div role="item" class="white"><template is="dom-repeat" items="[[activityLogs]]" as="log"><paper-item><paper-item-body two-line=""><div>[[_logTitle(log)]]</div><div secondary="">[[_logDetails(log)]]</div></paper-item-body></paper-item></template></div></main><paper-toast id="toast" class="fit-bottom"></paper-toast><template is="dom-if" if="[[isLoading]]"><div class="overlay lgrey-bg" style="margin-top: 64px"><div class="align-center"><paper-spinner active$="[[isLoading]]"></paper-spinner></div></div></template></template><script>class GridSettingsActivityLog extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings-activity-log'}static get properties(){return{user:{type:Object,statePath:'user'},gmap:Object,route:Object}}constructor(){super(),this.activityLogs=[],this.isLoading=!0}connectedCallback(){super.connectedCallback(),this.$.toast.fitInto=this,gAxios.get(`/users/${this.user.id}/activity/logs`).then((a)=>{this.activityLogs=a.data,this.isLoading=!1})}openToast(a=''){this.$.toast.close(),this.$.toast.innerHTML=a,this.$.toast.open()}ucFrist(a){return a.charAt(0).toUpperCase()+a.slice(1)}_logTitle(a){let b=`You `,c=a.subject_type.slice(4),d=a.description;switch(c){case'Job':{'created'==d?b+=`posted a job`:'updated'==d&&(b+=`updated the status of ${a.properties.attributes.name}`);break}case'Bid':{'created'==d&&(b+=`bid on a job`);break}case'Profile':{'created'==d?b+=`setup your profile`:'updated'==d&&(b+=`updated your profile`);break}case'Skill':{'created'==d?b+=`added a skill`:'updated'==d&&(b+=`updated your skills`);break}case'Location':{'created'==d?b+=`added a location`:'updated'==d&&(b+=`updated a location`);break}case'User':{'created'==d?b+=`create your account`:'updated'==d&&(b+=`updated your account`);break}}return b}_logDetails(a){let b=``,c=a.subject_type.slice(4),d=a.description;switch(c){case'Job':{'created'==d?b+=a.properties.attributes.name:'updated'==d&&(b+=`updated the status of ${a.properties.attributes.name}`);break}case'Bid':{'created'==d&&(b+=`Bidded AED ${a.properties.attributes.price_bid}. <a href='/bids/${a.subject_id}'>Details</a>`);break}case'Profile':{break}case'Skill':{break}case'Location':{break}case'User':{break}}return moment(a.created_at).fromNow()}}customElements.define(GridSettingsActivityLog.is,GridSettingsActivityLog);</script></dom-module></div><dom-module id="grid-settings"><template><style include="grid iron-flex">:host{display:block;position:relative;background:var(--light-grey);height:100%;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.title h1{font-weight:400;font-size:32px;}.main-settings{font-size:14px;}.divider{padding:8px 0;}.divider hr{margin:0;opacity:0.12;}a{display:block;text-decoration:none;color:#FFFFFF;}</style><app-route route="{{route}}" pattern="/settings/:id" data="{{settings}}"></app-route><div id="toolbar" class="toolbar"><paper-icon-button icon="first-page" class="red pointer" on-click="redirectHome"></paper-icon-button><div class="flex" style="overflow: hidden"><span id="toolbar-title">Settings</span></div></div><main class="flex"><section class="p-y-1 title"><h1 id="main-title" class="white m-0">Settings</h1></section><div class="white" role="listbox"><paper-item class="main-settings"><span class="red">YOU</span></paper-item><a href="/settings/username"><paper-item><paper-item-body two-line=""><div>Username</div><div secondary="">@[[user.username]]</div></paper-item-body></paper-item></a><a href="/settings/name"><paper-item><paper-item-body two-line=""><div>Name</div><div secondary="">[[user.name]]</div></paper-item-body></paper-item></a><a href="/settings/locations"><paper-item><paper-item-body two-line=""><div>Locations</div><div secondary=""><template is="dom-repeat" items="[[user.locations]]" as="loc">[[loc.alias]] [[_locationDivider(index)]]</template><template is="dom-if" if="[[!user.locations.length]]">Add your locations now</template></div></paper-item-body></paper-item></a><div class="divider"><hr></div><paper-item class="main-settings"><span class="red">ACCOUNT</span></paper-item><a href="/settings/verification"><paper-item><paper-item-body two-line=""><div>Email ID</div><div secondary="">[[user.email]]</div></paper-item-body></paper-item></a><a href="/settings/password"><paper-item><paper-item-body><div>Password</div></paper-item-body></paper-item></a><a href="/settings/mobile"><paper-item><paper-item-body two-line=""><div>Mobile Number</div><div secondary="">[[user.phone_number]]</div></paper-item-body></paper-item></a><div class="divider"><hr></div><paper-item class="main-settings"><span class="red">PRIVACY</span></paper-item><a href="/settings/activity-log"><paper-item><paper-item-body><div>Activity Log</div></paper-item-body></paper-item></a></div></main><iron-pages id="subPages" attr-for-selected="data-page" selected="[[settings.id]]"><section data-page="username" class="sub-page"><grid-settings-username></grid-settings-username></section><section data-page="name" class="sub-page"><grid-settings-name></grid-settings-name></section><section data-page="general" class="sub-page"><grid-settings-general></grid-settings-general></section><section data-page="account" class="sub-page"><grid-settings-account></grid-settings-account></section><section data-page="locations" class="sub-page"><grid-settings-locations gmap="[[gmap]]"></grid-settings-locations></section><section data-page="password" class="sub-page"><grid-settings-password></grid-settings-password></section><section data-page="verification" class="sub-page"><grid-settings-verification></grid-settings-verification></section><section data-page="mobile" class="sub-page"><grid-settings-mobile></grid-settings-mobile></section><section data-page="account-visibility" class="sub-page"><grid-settings-account-visibility></grid-settings-account-visibility></section><section data-page="contact-information" class="sub-page"><grid-settings-contact-information></grid-settings-contact-information></section><section data-page="activity-log" class="sub-page"><grid-settings-activity-log></grid-settings-activity-log></section></iron-pages><template is="dom-if" if="[[isLoading]]"><div class="overlay lgrey-bg" style="margin-top: 64px"><div class="align-center"><paper-spinner active$="[[isLoading]]"></paper-spinner></div></div></template></template><script>class GridSettings extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-settings'}static get properties(){return{gmap:Object,route:Object,auth:{type:Boolean,statePath:'auth'},user:{type:Object,statePath:'user'}}}static get observers(){return['_routeChange(route)']}constructor(){super()}generalSettings(){this.redirect('/settings/general')}accountSettings(){this.redirect('/settings/account')}locationsSettings(){this.redirect('/settings/locations')}connectedCallback(){super.connectedCallback(),this.headerAnimate()}headerAnimate(){const a=this.shadowRoot.querySelector('#toolbar'),b=this.shadowRoot.querySelector('main'),c=this.shadowRoot.querySelector('#toolbar-title'),d=this.shadowRoot.querySelector('#main-title'),e=16;let f=0,g=0;const h=()=>{const a=c.offsetHeight,b=d.offsetHeight;if(g>=e&&g<=e+b){f=g-e;let d=a-f*(a/b);c.style.cssText=`transform: translateY(${d}px); transition-duration: 0ms`}g>=e+b&&(c.style.transform=`translateY(0)`,c.style.transitionDuration=`100ms`),g<=e&&(c.style.transform=`translateY(${a}px)`,c.style.transitionDuration=`100ms`)};b.addEventListener('scroll',()=>{let c=b.scrollTop;0<c?a.classList.add('shadow'):a.classList.remove('shadow'),g=c,requestAnimationFrame(h)})}_routeChange(a){'/settings'==a.path&&this.set('settings.id',null)}_locationDivider(a){if(a<this.user.locations.length-1)return'|'}_verification(a){return a?'Verified':'Not Verified'}_visibility(a){let b={public:'Public',users:'Users',onlyme:'Only Me'};return b[a]?b[a]:'Public'}}customElements.define(GridSettings.is,GridSettings);</script></dom-module></body></html>