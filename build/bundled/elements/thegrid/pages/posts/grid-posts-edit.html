<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="grid-posts-edit-1"><template><style include="grid iron-flex">:host{display:block;height:100%;background:var(--light-grey);}</style><div id="toolbar" class="toolbar lgrey-bg"><div class="flex"><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectBack"></paper-icon-button></div><div id="indicator"></div><div class="flex align-right"><paper-button id="next" class="white pointer" on-click="submit" hidden$="[[!readyPost]]">Next</paper-button></div></div><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><div id="wr" class="wr"><form class="form" id="formCarousel" form-carousel=""><div class="form-group relative" data-step="1" data-question="What do you need?"><input id="name" type="text" class="form-input" autofocus="" autocomplete="off" placeholder="Start typing" value="{{what::input}}" data-validate="required" data-message-required="Please tell us what you need."></div><div class="form-group relative" data-step="2" data-question="By when?"><input id="when" type="text" class="form-input" autocomplete="off" placeholder="When?" value="{{when::input}}" data-validate="required" data-message-required="Please tell us when." date-picker="#date-picker" readonly=""></div><div class="input-group suffix" data-step="3" data-question="Where?"><input id="where" type="text" class="input" autocomplete="off" placeholder="Where?" value="{{where::input}}" data-validate="required" data-message-required="Please tell us where." on-click="showMap"><div class="addon-suffix has-icon"><template is="dom-if" if="[[ user.locations.length ]]"><paper-icon-button id="mylocationsButton" class="red" icon="grid:location" hidden$="[[!gmap.map]]" on-tap="openMyLocationsDialog"></paper-icon-button></template><paper-icon-button id="locationButton" class="red" icon="maps:my-location" hidden$="[[!gmap.map]]" on-tap="myLocation"></paper-icon-button></div></div><div class="input-group" data-step="4" data-question="Set Category"><select id="category" class="input" data-validate="required" data-message-required="Category is required."><option value="">--Please select category--</option><template is="dom-repeat" items="[[ categories ]]" as="cat"><option value$="[[ cat.id ]]">[[ cat.category ]]</option></template></select></div></form></div></div><grid-date-picker id="date-picker" date-time="{{when}}" time="{{time}}" no-range="true" has-time="true"></grid-date-picker><gmap-search id="gmap-search" location="{{location}}"></gmap-search><paper-dialog id="myLocationsDialog" class="dialog-dark"><h2>Select from your locations</h2><div><paper-radio-group selected="{{ selected_from_locations }}"><template is="dom-repeat" items="[[ user.locations ]]" as="location"><paper-radio-button class="block" on-click="selectMyLocation" name="[[ location.alias ]]">[[ location.alias ]]</paper-radio-button></template></paper-radio-group></div><div class="buttons"><paper-button dialog-dismiss="" class="white">Cancel</paper-button><paper-button dialog-confirm="" class="white" on-click="confirmMyLocation" disabled="[[ noSelectedLocation ]]">Ok</paper-button></div></paper-dialog></template><script>class GrdiPostsEdit1 extends MapBehaviorMixin(FormSliderBehavior(GridNavigation(ReduxBehavior(Polymer.Element)))){static get is(){return'grid-posts-edit-1'}static get properties(){return{user:{type:Object,statePath:'user'},posts:{type:Object,statePath:'posts'},step1:{type:Boolean,value:!1,notify:!0},data:{type:Object,notify:!0},categories:{type:Array,statePath:'categories',observer:'_categoriesChange'}}}static get observers(){return['_formDone(what, when, where, category)','_isMapInit(gmap)','_dataChange(data)','_locationChange(location)']}constructor(){super(),this.readyPost=!1,this.map=null,this.noSelectedLocation=!0}connectedCallback(){super.connectedCallback();const a=this;this.initForm(),this.set('step.message','Edit Post');const b=()=>{let a=new Date,b=a.getDate(),c=a.getMonth()+1,e=a.getFullYear();return 10>b&&(b='0'+b),10>c&&(c='0'+c),a=e+'-'+c+'-'+b,a},c=this.shadowRoot.querySelector('#when');c.setAttribute('min',b()),window.addEventListener('done-posting',()=>{this.arrangeSteps(1)});const e=this.$.category;e.addEventListener('change',function(){a.category=this.value}),window.addEventListener('map:center_changed',(a)=>{let b=a.detail;this.lat=b.lat,this.lng=b.lng});const f=this.shadowRoot.querySelector('[date-picker]');f.addEventListener('click',()=>{let a=f.getAttribute('date-picker');const c=this.shadowRoot.querySelector(a);c.min=moment(b()).unix(),c.open()}),this.data&&this._dataChange(this.data)}showMap(){const a=this.shadowRoot.querySelector('#gmap-search');a.open();let b=new google.maps.LatLng(this.data.lat,this.data.lng);a.map.setCenter(b)}myLocation(){const a=this,b=this.gmap;return b.currentLocation?(this.gmap.map.setCenter(b.currentLocation.latLng),void this.gmap.geocodeLatLng(b.currentLocation).then((a)=>{this.where=a[0].formatted_address,this.$.locationButton.classList.remove('inactive')}).catch((a)=>{console.log(a)})):void(navigator.geolocation&&(a.$.locationButton.classList.add('inactive'),navigator.geolocation.getCurrentPosition(function(b){let c={lat:b.coords.latitude,lng:b.coords.longitude};a.lat=c.lat,a.lng=c.lng,a.gmap.map.setCenter(c),a.gmap.geocodeLatLng(c).then((b)=>{a.where=b[0].formatted_address,a.$.locationButton.classList.remove('inactive')}).catch((a)=>{console.log(a)})})))}openMyLocationsDialog(){this.shadowRoot.querySelector('#myLocationsDialog').open()}selectMyLocation(a){this.selectedMyLocation=a.model.location,this.noSelectedLocation=!1}confirmMyLocation(){this.selectedMyLocation&&(this.where=this.selectedMyLocation.location,this.lat=this.selectedMyLocation.lat,this.lng=this.selectedMyLocation.lng)}submit(){this.step1=!0;let a=this.data;a.what=this.what,a.where=this.where,a.when=this.when,a.lat=this.lat,a.lng=this.lng,a.category=this.category,this.data=null,this.set('data',a),this.redirect(`/posts/edit/${this.data.id}#2`)}redirectPost(){this.data&&this.redirect(`/posts/${this.data.id}`)}_locationChange(a){a&&(this.where=a.location,this.lat=this.data.lat=a.lat,this.lng=this.data.lng=a.lng)}_formDone(a,b,c,e){this.readyPost=!1,a&&b&&c&&e&&(this.readyPost=!0)}_isMapInit(a){if(!a)return;const b=this,c=b.shadowRoot.querySelector('#where');if(c){var e=new google.maps.places.SearchBox(c);e.addListener('places_changed',function(){b.where=c.value;var f=e.getPlaces();if(0!=f.length){const c=new google.maps.LatLngBounds;for(var g,h=0;g=f[h];h++)c.extend(g.geometry.location);b.map.fitBounds(c),b.lat=a.map.getCenter().lat(),b.lng=a.map.getCenter().lng()}}),google.maps.event.addListener(a.map,'bounds_changed',()=>{var b=a.map.getBounds();e.setBounds(b)})}const f=b.shadowRoot.querySelector('#search-location');if(f){var g=new google.maps.places.SearchBox(f);g.addListener('places_changed',function(){var b=g.getPlaces();if(0!=b.length){const f=new google.maps.LatLngBounds;for(var c,e=0;c=b[e];e++)f.extend(c.geometry.location);a.map.fitBounds(f)}}),google.maps.event.addListener(a.map,'bounds_changed',()=>{var b=a.map.getBounds();g.setBounds(b)})}}_categoriesChange(){!this.data}_getCategories(){let a=this.categories.slice(0);a.map((a)=>(a.id==this.data.category_id&&(a.selected=!0),d)),this.jobCategories=a}_dataChange(a){if(!a)return;this.what=a.name,this.where=a.location,this.when=a.date,this.lat=a.lat,this.lng=a.lng,this.category=a.category_id;const b=this.categories.find((b)=>b.id==a.category_id);setTimeout(()=>{this.shadowRoot.querySelector('#category').selectedIndex=this.categories.indexOf(b)+1},0)}}customElements.define(GrdiPostsEdit1.is,GrdiPostsEdit1);</script></dom-module><dom-module id="grid-posts-edit-2"><template><style include="grid iron-flex">:host{display:block;height:100%;background:var(--light-grey);}</style><div id="toolbar" class="toolbar lgrey-bg"><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectBack"></paper-icon-button><div class="flex"></div><paper-button id="next" class="white pointer" on-click="submit" hidden$="[[!readyPost]]">Next</paper-button></div><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><div id="wr" class="wr"><form class="form" id="formCarousel" form-carousel=""><div class="input-group prefix" data-step="1" data-question="How much is your budget?"><div class="addon-prefix flex layout horizontal"><span on-click="openCurrencyDialog">[[ currency_unit ]]</span></div><input id="price" type="number" class="input" autocomplete="off" placeholder="Price" value="{{price::input}}" data-validate="required" data-message-required="Please tell us our budget."></div></form></div></div><paper-dialog id="currencyDialog" class="dialog-dark"><h2>Select Currency</h2><paper-dialog-scrollable><template is="dom-if" if="[[ !countries.length ]]">Loading...</template><paper-radio-group selected="{{ selected_currency }}"><template is="dom-repeat" items="[[ countries ]]" as="country"><paper-radio-button class="block" name="[[ country.currency_unit ]]" on-click="setCurrency">[[ country.currency_unit ]] ( [[ country.nicename ]] )</paper-radio-button></template></paper-radio-group></paper-dialog-scrollable><div class="buttons"><paper-button dialog-dismiss="" class="white">Cancel</paper-button><template is="dom-if" if="[[ countries.length ]]"><paper-button dialog-confirm="" class="white" on-click="confirmCurrency">Ok</paper-button></template></div></paper-dialog></template><script>class GrdiPostsEdit2 extends FormSliderBehavior(GridNavigation(ReduxBehavior(Polymer.Element))){static get is(){return'grid-posts-edit-2'}static get properties(){return{user:{type:Object,statePath:'user'},auth:{type:Object,statePath:'auth'},posts:{type:Object,statePath:'posts'},data:{type:Object,notify:!0}}}static get observers(){return['_formDone(price)','_dataChange(data)']}static get actions(){return{addPost(a){return{type:'ADD_POST',post:a}}}}constructor(){super(),this.readyPost=!1,this.map=null,this.countries=[]}connectedCallback(){this;super.connectedCallback(),this.initForm(),this.set('step.message','How much is your budget?'),window.addEventListener('done-posting',()=>{this.arrangeSteps(1)}),this.getCountries()}getCountries(){axios.get(`${this.url.API_URL}/getCountries`).then((a)=>{this.countries=a.data,this.shadowRoot.querySelector('#currencyDialog').attached()})}setCurrency(a){this.country=a.model.country}confirmCurrency(){this.country&&(this.data.country_id=this.country.id,this.currency_unit=this.country.currency_unit)}openCurrencyDialog(){this.shadowRoot.querySelector('#currencyDialog').open()}goBack(){this.data&&this.redirect(`/posts/edit/${this.data.id}#1`)}submit(){this.data&&(this.data.price=this.price,this.redirect(`/posts/edit/${this.data.id}#3`))}_formDone(a){this.readyPost=!1,a&&(this.readyPost=!0)}_dataChange(a){a&&(this.price=a.price,this.currency_unit=this.data.country.currency_unit,this.country_id=this.data.country.id)}}customElements.define(GrdiPostsEdit2.is,GrdiPostsEdit2);</script></dom-module><dom-module id="grid-posts-edit-3"><template><style include="grid iron-flex">:host{display:block;height:100%;background:var(--light-grey);}.auto-complete{position:absolute;top:52px;background:#FFFFFF;left:0;right:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;display:none;min-height:0px;max-height:400px;z-index:1;overflow-y:auto;}.auto-complete .row{padding:8px 16px;border-top:1px solid rgba(0, 0, 0, 0.12);position:relative;}.auto-complete .row span{display:block;}.auto-complete .row span[secondary]{opacity:0.38;}.skills-container{overflow-y:auto;max-height:350px;padding:32px 0;}.skills-container::-webkit-scrollbar{width:0px;background:transparent;}.selected{background:rgba(142, 142, 142, 0.13);}</style><div id="toolbar" class="toolbar lgrey-bg"><paper-icon-button icon="chevron-left" class="white pointer" on-click="redirectBack"></paper-icon-button><div class="flex"></div><paper-button id="next" class="white pointer" on-click="skip" hidden$="[[readyPost]]">Skip</paper-button><paper-button id="next" class="white pointer" on-click="submit" hidden$="[[!readyPost]]">Next</paper-button></div><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><form class="form" form-carousel=""><div class="input-group suffix" data-step="1" data-question="What skills would you require?" style="z-index: 1"><input id="tag" type="text" class="input" autocomplete="off" autofocus="" value="{{query::input}}" placeholder="Enter Tag..."><div class="addon-suffix"><span class="input-action pointer" on-click="cancelSearch"><iron-icon icon="close" class="red"></iron-icon></span></div><div id="result" class="auto-complete"><template is="dom-repeat" items="[[ selectable_tags ]]" as="tag" filter="{{_filter(query)}}"><div class="row" on-click="select"><span>[[tag.name]]</span> <span secondary="">[[tag.type.name]]</span></div></template></div></div></form><div class="skills-container"><template is="dom-repeat" items="[[ selected_tags ]]" as="tag"><div class="chip"><span>[[ tag.name ]]</span> <span class="close"><iron-icon icon="close" class="small" on-click="removeTag"></iron-icon></span></div></template></div></div></template><script>class GrdiPostsEdit3 extends FormSliderBehavior(GridNavigation(ReduxBehavior(Polymer.Element))){static get is(){return'grid-posts-edit-3'}static get properties(){return{user:{type:Object,statePath:'user'},posts:{type:Object,statePath:'posts'},step1:{type:Boolean,value:!1,notify:!0},data:{type:Object,notify:!0},tags:{type:Array,value:function(){return[]}},selectable_tags:{type:Array,value:function(){return[]}},selected_tags:{type:Array,value:function(){return[]}},tagsCount:{type:Number,value:0}}}static get observers(){return['_formDone(tagsCount)','_searching(query)','_dataChange(data.*, tags)']}static get actions(){return{}}constructor(){super(),this.readyPost=!0,this.getTags()}getTags(){gAxios.get(`/tags`).then((a)=>{this.tags=a.data})}connectedCallback(){super.connectedCallback(),this.initForm(),this.set('step.message','Tags');const a=this,b=this.shadowRoot.querySelector('#tag');a.selected=-1,a.scroll=0;b.addEventListener('keydown',function(b){const c=a.shadowRoot.querySelector('#result'),d=c.querySelectorAll('.row'),e=c.offsetHeight;if(40==b.keyCode){if(a.selected==d.length-1)return;b.preventDefault(),b.stopPropagation();var f=d[a.selected];f&&f.classList.remove('selected'),a.selected+=1,d[a.selected]&&(f=d[a.selected],f.classList.add('selected'),e<a.selected*f.offsetHeight+f.offsetHeight&&(c.scrollTop+=f.offsetHeight))}if(38==b.keyCode){if(-1==a.selected)return;b.preventDefault(),b.stopPropagation();var f=d[a.selected];f&&f.classList.remove('selected'),a.selected-=1,d[a.selected]&&(f=d[a.selected],f.classList.add('selected'),c.scrollTop>a.selected*f.offsetHeight&&(c.scrollTop-=f.offsetHeight))}if(13==b.keyCode){if(b.preventDefault(),b.stopPropagation(),-1==a.selected)return;d[a.selected].click()}}),window.addEventListener('done-posting',()=>{this.set('query',''),this.set('selected_tags',[]),this.readyPost=!1}),window.addEventListener('location:back',()=>{const a=this.shadowRoot.querySelectorAll('input');a.forEach((a)=>{a.blur()})})}goBack(){this.data&&this.redirect(`/posts/edit/${this.data.id}#2`)}skip(){this.redirect(`/posts/edit/${this.data.id}#4`)}submit(){this.data.tags=this.selected_tags,this.redirect(`/posts/edit/${this.data.id}#4`)}select(a){const b=a.model.tag;var c=this.selected_tags.find(function(a){return a.id===b.id});c||(this.push('selected_tags',b),this.tagsCount+=1),this.set('query',''),this.shadowRoot.querySelector('#tag').focus()}cancelSearch(){this.set('query','')}removeTag(a){const b=a.model.tag,c=this.selected_tags.indexOf(b);-1!=c&&(this.splice('selected_tags',c,1),this.tagsCount-=1)}_formDone(a){this.readyPost=!1,0<a&&(this.readyPost=!0)}_filter(a){return a?(a=a.toLowerCase(),function(b){var c=b.name.toLowerCase();return-1!=c.indexOf(a)}):null}_searching(a){this.selected=-1;const b=this.shadowRoot.querySelector('#result'),c=b.querySelectorAll('.row');var d=55;c[0]&&(d=c[0].offsetHeight,0>=d&&(d=55)),c.forEach((a)=>{a.classList.remove('selected')}),b.scrollTop=0,b.style.maxHeight=5*d+'px',this.$.result.style.display=''==a?'none':'block'}_dataChange(a,b){const c=a.base;c&&(this.selected_tags=c.tags,this.tagsCount=c.tags.length,!this.selected_category&&(this.selected_category=c.category),this.selected_category!=c.category&&(this.selected_tags=[],this.selected_category=c.category),c.category&&b&&(this.selectable_tags=this.tags.filter((a)=>a.category.id==c.category)))}}customElements.define(GrdiPostsEdit3.is,GrdiPostsEdit3);</script></dom-module><dom-module id="grid-posts-edit-4"><template><style include="grid iron-flex">:host{height:100%;background:var(--light-grey);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}#previews{display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}#previews .wrap{margin:5px 0;}.file{display:inline-block;position:relative;color:#FFFFFF;background:rgba(33, 33, 33, 0.87);border-radius:2px;padding:4px 4px;}.file img{width:24px;height:24px;vertical-align:middle;}.file span{line-height:25px;margin:0 5px;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.file iron-icon{cursor:pointer;}</style><div id="toolbar" class="toolbar lgrey-bg"><paper-icon-button icon="chevron-left" class="red pointer" on-click="redirectBack"></paper-icon-button><div class="flex"></div><paper-button id="next" class="white pointer" on-click="submit" hidden$="[[!readyPost]]">Update</paper-button></div><main class="flex"><div class="p-y-1"><div class="header-text-container"><h1 class="header-text m-0"><span hidden$="[[step.message]]">[[step.question]]</span> <span hidden$="[[!step.message]]">[[step.message]]</span></h1></div><form class="form"><div class="input-group suffix"><textarea rows="6" class="input" value="{{details::input}}" style="resize: none; height: 150px; padding: 16px" placeholder="Start typing.."></textarea><div class="addon-suffix has-button flex layout vertical" style="height: 150px"><paper-icon-button icon="grid:attachment" on-click="selectFile"></paper-icon-button><span class="flex"></span></div></div></form><input type="file" id="files" on-change="previewFiles" multiple="" style="position: absolute; left: -99999px; top: -99999px"><div id="previews"><template is="dom-repeat" items="[[files]]" as="file"><div class="wrap"><div class="file layout horizontal"><img id="file-[[index]]" src$="[[_fileReader(file, index)]]"> <span class="flex">[[file.name]]</span><iron-icon icon="close" on-click="removeFile"></iron-icon></div></div></template></div></div></main></template><script>class GrdiPostsEdit4 extends FormSliderBehavior(GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element)))){static get is(){return'grid-posts-edit-4'}static get properties(){return{user:{type:Object,statePath:'user'},auth:{type:Boolean,statePath:'auth'},posts:{type:Array,statePath:'posts'},data:{type:Object,notify:!0}}}static get observers(){return['_formDone(details)','_filesChange(files)','_dataChange(data)']}constructor(){super(),this.readyPost=!1,this.files=[]}connectedCallback(){this;super.connectedCallback(),this.set('step.message','Add a brief description.'),window.addEventListener('done-posting',()=>{this.files=this.data.files})}goBack(){this.data&&this.redirect(`/posts/edit/${this.data.id}#3`)}submit(){this.data.details=this.details;let a=new FormData;a.append('id',this.data.id),a.append('user_id',this.user.id),a.append('name',this.data.what),a.append('price',this.data.price),a.append('lat',this.data.lat),a.append('lng',this.data.lng),a.append('location',this.data.where),a.append('date',this.data.when),a.append('category_id',this.data.category),a.append('country_id',this.data.country_id),this.data.tags&&this.data.tags.length&&a.append('tags',JSON.stringify(this.data.tags)),a.append('details',this.details),this.files.length&&this.files.forEach((b)=>{b.id?a.append('_files[]',JSON.stringify(b)):a.append('files[]',b)}),window.dispatchEvent(new CustomEvent('posting')),gAxios.post(`/users/${this.user.id}/jobs/edit`,a).then((a)=>{var b=a.data;this.dispatch('updatePost',b),this.redirect(`/posts/${b.id}`),this.dispatch('updatePost',b),this.gmap&&this.gmap.updateMarker(b)}).catch((a)=>{a.response&&(alert('Oops something went wrong.. \n Please reload the page.'),window.location.href='/')}).then(()=>{window.dispatchEvent(new CustomEvent('done-posting'))})}selectFile(){this.shadowRoot.querySelector('#files').click()}previewFiles(){this.shadowRoot.querySelector('#files').files;let a=[];file.forEach((b)=>{if(5==this.files.length)return void a.push('Only 5 files can be uploaded.');let c=!1;switch(b.type){case'image/jpeg':case'image/png':case'application/pdf':c=!0;}c?1e6>=b.size?this.push('files',b):a.push(`${b.name} is greater than 1mb.`):a.push(`${b.name} is not allowed to upload.`)}),a.length&&alert(a.join('\n'))}removeFile(a){const b=a.model.file,c=this.files.indexOf(b);if(-1!=c){let a=this.files.slice(0);a.splice(c,1),this.set('files',a)}}_fileReader(a,b){const c=this.shadowRoot.querySelector('#previews');if(a.id)return void('jpeg'==a.type||'png'==a.type?setTimeout(()=>{c.querySelector(`img#file-${b}`).src=`${this.url.API_BASE_URL}/uploads/${a.path}`},100):'pdf'==a.type&&setTimeout(()=>{let a=c.querySelector(`img#file-${b}`);a&&(a.src=`/assets/images/icons/pdf.png`)},100));let d=new FileReader;d.onloadend=()=>{if(-1!=a.type.indexOf('pdf')){let a=c.querySelector(`img#file-${b}`);a&&(a.src=`/assets/images/icons/pdf.png`)}else c.querySelector(`img#file-${b}`).src=d.result},a?d.readAsDataURL(a):c.querySelector(`img#file-${b}`).src=''}_filesChange(){}_formDone(a){this.readyPost=!1,a&&(this.readyPost=!0)}_dataChange(a){a&&(this.details=a.details,this.files=a.files)}}customElements.define(GrdiPostsEdit4.is,GrdiPostsEdit4);</script></dom-module></div><dom-module id="grid-posts-edit"><template><style include="grid iron-flex">:host{display:block;height:100%;background:var(--light-grey);}@media (min-width: 601px){}</style><app-location route="{{route}}" use-hash-as-path=""></app-location><app-route route="{{route}}" pattern=":id" data="{{step}}"></app-route><iron-pages attr-for-selected="data-page" selected="[[step.id]]"><section data-page="1" class="sub-page"><grid-posts-edit-1 data="{{ data }}" gmap="[[gmap]]"></grid-posts-edit-1></section><section data-page="2" class="sub-page"><grid-posts-edit-2 data="{{ data }}" gmap="[[gmap]]"></grid-posts-edit-2></section><section data-page="3" class="sub-page"><grid-posts-edit-3 data="{{ data }}" gmap="[[gmap]]"></grid-posts-edit-3></section><section data-page="4" class="sub-page"><grid-posts-edit-4 data="{{ data }}" gmap="[[gmap]]"></grid-posts-edit-4></section></iron-pages><template is="dom-if" if="[[isPosting]]"><div class="overlay lgrey-bg"><div class="align-center"><h3 class="white">Your job is updating...</h3><br><paper-spinner active$="[[isPosting]]"></paper-spinner></div></div></template></template><script>class GrdiPostsEdit extends GridNavigation(ReduxAsyncActionBehavior(ReduxBehavior(Polymer.Element))){static get is(){return'grid-posts-edit'}static get properties(){return{user:{type:Object,statePath:'user'},auth:{type:Boolean,statePath:'auth'},posts:{type:Object,statePath:'posts'},map:{type:Object,notify:!0},isPosting:{type:Boolean,value:!1},data:{type:Object,value:null}}}static get observers(){return['_dataNull(data)','_postIdChange(postId)','_postsChange(posts)']}_dataNull(){}constructor(){super(),this.readyPost=!1,this.map=null}connectedCallback(){super.connectedCallback(),window.addEventListener('done-posting',()=>{this.set('step.id',1),this.isPosting=!1}),window.addEventListener('posting',()=>{this.isPosting=!0})}_postIdChange(a){a&&this.auth&&this.posts&&this.posts.map((b)=>{parseInt(b.id)===parseInt(a)&&(this.data=b)})}_postsChange(a){a.map((a)=>{parseInt(a.id)===parseInt(this.postId)&&(this.data=a)})}}customElements.define(GrdiPostsEdit.is,GrdiPostsEdit);</script></dom-module></body></html>