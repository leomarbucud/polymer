<html><head></head><body><dom-module id="grid-profile"><template><style include="grid grid-tabs iron-flex">:host{position:relative;width:100%;height:100%;margin:0 auto;background:var(--dark-red);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.top-section{padding-bottom:16px;}.top-section .avatar-name{margin-bottom:16px;}.lower-section{background:#303030;padding-bottom:16px;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}main{display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.section-title{line-height:40px;}.section-title .title{font-size:18px;}div.divider{padding:8px 0;}div.divider hr{margin:0;opacity:0.12;}.chip{padding-right:16px;}.white-7{color:rgba(255, 255, 255, 0.7);}.stats{padding:0 8px;text-align:center;border-right:1px solid #FFFFFF;}.stats:last-child{padding-right:0px;border-right:none;}.num{font-size:24px;}.name{font-size:34px;}main{padding-bottom:0;}a{text-decoration:none;color:#FFFFFF;}.center{text-align:center;}.time{font-size:12px;opacity:0.7;}.tags-container{padding:16px 0;}</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="/profile" data="{{routeData}}" tail="{{subroute}}"></app-route><app-route route="{{subroute}}" pattern="/:id" data="{{subrouteData}}"></app-route><div id="toolbar" class="toolbar dred-bg"><paper-icon-button icon="first-page" class="white pointer" on-click="redirectHome"></paper-icon-button><span class="flex"></span></div><main class="scroll-area flex"><section class="p-y-1 top-section dred-bg"><div class="layout horizontal avatar-name"><div class="flex"><span class="flex m-0 white name">[[user.name]]</span> <span class="block white">@[[user.username]]<template is="dom-if" if="[[user.confirmed]]"><iron-icon class="white" icon="grid:verified"></iron-icon></template></span></div><img on-click="editProfile" class="circle" src$="[[_profileImage(user.profile.profile_image_url)]]" avatar$="[[user.name]]"></div><div class="layout horizontal white"><div class="flex m-0"><span class="block" style="height: 28px"><grid-ratings rate="[[rate]]" class="white"></grid-ratings></span><span class="block white-7">[[ user.reviews.length ]] [[ _pluralize('Rating', user.reviews.length) ]]</span></div><div class="stats"><span class="block num">[[user.jobs_count]]</span> <span class="block white-7">[[ _pluralize('Post', user.jobs_count) ]]</span></div><div class="stats"><span class="block num">[[user.bids_count]]</span> <span class="block white-7">[[ _pluralize('Bid', user.bids_count) ]]</span></div></div></section><div><paper-tabs selected="{{ selected_tab }}" class="tabs-red"><paper-tab>About</paper-tab><paper-tab>Highlights</paper-tab><paper-tab>Reviews</paper-tab></paper-tabs></div><section class="lower-section flex"><div class="p-y-1 flex relative" style="padding-top: 16px; background: #303030"><iron-pages selected="{{ selected_tab }}"><div><detail-text label="Bio" class="normal"><p class="white">[[user.profile.bio]]</p><div class="align-right"><a class="red pointer" href="/profile/about">Edit</a></div></detail-text><detail-text label="Tags" class="normal"><div class="tags-container"><template is="dom-if" if="[[ isTagsLoading ]]"><div class="center"><paper-spinner class="white" active="[[ isTagsLoading ]]"></paper-spinner></div></template><template is="dom-repeat" items="[[ selected_tags ]]" as="tag"><div class="chip"><span>[[ tag.name ]]</span></div></template></div><div class="align-right"><a class="red pointer" href="/profile/tags">Edit</a></div></detail-text></div><div><template is="dom-if" if="[[ isHighlightedBidsLoading ]]"><div class="overlay"><div class="align-center"><paper-spinner class="white" active="[[ isHighlightedBidsLoading ]]"></paper-spinner></div></div></template><template is="dom-if" if="[[ !isHighlightedBidsLoading ]]"><template is="dom-if" if="[[ !higlightedBids.length ]]"><div class="overlay"><div class="align-center">No highlighted jobs</div></div></template><template is="dom-repeat" items="[[ higlightedBids ]]" as="bid"><highlighted-item data="[[ bid ]]"></highlighted-item></template></template></div><div><template is="dom-if" if="[[isReviewsLoading]]"><div class="overlay"><div class="align-center"><paper-spinner class="white" active=""></paper-spinner></div></div></template><template is="dom-if" if="[[ !isReviewsLoading ]]"><template is="dom-if" if="[[ !reviews.length ]]"><div class="overlay"><div class="align-center">No reviews</div></div></template><template is="dom-repeat" items="[[ reviews ]]" as="review"><review-item data="[[ review ]]"></review-item></template></template></div></iron-pages></div></section></main><iron-pages attr-for-selected="data-page" selected="[[ subPage ]]"><section data-page="setup" class="sub-page"><grid-setup id="setup"></grid-setup></section><section data-page="tags" class="sub-page"><grid-profile-skills id="tags"></grid-profile-skills></section><section data-page="edit" class="sub-page"><grid-profile-edit id="edit"></grid-profile-edit></section><section data-page="about" class="sub-page"><grid-profile-about id="about"></grid-profile-about></section></iron-pages></template><script>class GridProfile extends GridNavigation(ReduxBehavior(Polymer.Element)){static get is(){return'grid-profile'}static get properties(){return{user:{type:Object,statePath:'user'},selected_tags:{type:Object,statePath:'user.tags'}}}static get observers(){return['_subrouteChange(subroute)','_subrouteDataChange(subrouteData)']}constructor(){super(),this.isTagsLoading=!0,this.isRecentPostsLoading=!0,this.isCompletedJobsLoading=!0,this.isReviewsLoading=!0,this.selected_tab=0,this.isHighlightedBidsLoading=!0}connectedCallback(){super.connectedCallback(),this.fetchData(),this.tags=this.user.tags,this.isTagsLoading=!1;const a=this.shadowRoot.querySelector('main');a.addEventListener('scroll',()=>{0<a.scrollTop?this.shadowRoot.querySelector('#toolbar').classList.add('shadow'):this.shadowRoot.querySelector('#toolbar').classList.remove('shadow')}),LetterAvatar.transform();let b=0;if(this.user.reviews){const a=this.user.reviews.length;this.user.reviews.forEach((a)=>{b+=a.stars}),this.rate=0==b?0:Math.floor(b/a)}else this.rate=0}fetchData(){const a=(a)=>gAxios.get(a,{headers:{}}).catch(function(){return null}),b=(a)=>'serviceWorker'in navigator&&navigator.serviceWorker.controller?gAxios.get(a,{headers:{Cached:'yes'}}).catch(function(){return null}):Promise.resolve(null),c=()=>{const c=a(`/users/${this.user.id}/reviews`).then((a)=>!!a&&!!a.data&&(this.reviews=a.data,this.isReviewsLoading=!1,!0)),d=b(`/users/${this.user.id}/reviews`).then((a)=>!!a&&!!a.data&&(this.reviews=a.data,this.isReviewsLoading=!1,!0));c.then((a)=>a||cacheData).then((a)=>{})};(()=>{const d=a(`/users/${this.user.id}/bids/highlighted`).then((a)=>!!a&&!!a.data&&(this.higlightedBids=a.data,this.isHighlightedBidsLoading=!1,!0)),e=b(`/users/${this.user.id}/bids/highlighted`).then((a)=>!!a&&!!a.data&&(this.recentPosts=a.data,this.isRecentPostsLoading=!1,!0));d.then((a)=>a||cacheData).then((a)=>{!a,c()})})()}editProfile(){this.redirect('/profile/edit')}redirectAbout(){this.redirect('/profile/about')}_subrouteChange(a){''==a.path&&(this.set('subrouteData.id',null),this.subPage=null)}_subrouteDataChange(a){const b=this;a.id?(!this.shadowRoot.querySelector(`#${a.id}`)&&(b.subPage=null),Polymer.Base.importHref(`/elements/thegrid/pages/profile/grid-profile-${a.id}.html?v=${window.VERSION}`,()=>{b.subPage=a.id})):b.subPage=null}_profileImage(a){return a?`${this.url.API_BASE_URL}/uploads/${a}`:this.user?LetterAvatar(this.user.name,'64'):LetterAvatar('Grid',64)}_fromNow(a){return moment(a).fromNow()}_pluralize(a,b){return 1==b?a:`${a}s`}}customElements.define(GridProfile.is,GridProfile);</script></dom-module></body></html>